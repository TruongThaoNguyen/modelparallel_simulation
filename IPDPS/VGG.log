python parallel_analysis.py -net VGG_ImageNet_prof.net -plat ABCI.plat -goal 1 --cmaxp 2048 --cmaxB 4096
====================================
Read platform from  ABCI.plat
====================================
FILE:  ABCI.plat
MEM_PER_NODE:  8000000000.0
NODE_SPEED:  7.8e+12
BANDWIDTH:  12500000000.0
LATENCY:  5e-07
MAX_NODE:  4096.0
====================================
Read dataset and DNN from  VGG_ImageNet_prof.net
====================================
DATASET:  ImageNet
DATASET SIZE:  1280000.0
SAMPLE SIZE: 3x226x226 153228
====================================
Model:  VGG16
LAYER	 x[C,W,H] 	 w[C,F,K,K] 	 y[F,W,H] 	 TComp
CONV1_1 	[3, 226, 226] 	[3, 64, 3, 3] 	[64, 226, 226] 	0.00118
RELU 	[64, 226, 226] 	[64, 64, 0, 0] 	[64, 226, 226] 	0.000215
CONV1_2 	[64, 226, 226] 	[64, 64, 3, 3] 	[64, 226, 226] 	0.000269
RELU 	[64, 226, 226] 	[64, 64, 0, 0] 	[64, 226, 226] 	7.26e-05
MPOOL 	[64, 226, 226] 	[0, 0, 2, 2] 	[64, 113, 113] 	5.88e-05
CONV2_1 	[64, 113, 113] 	[64, 128, 3, 3] 	[128, 113, 113] 	0.000162
RELU 	[128, 113, 113] 	[128, 128, 0, 0] 	[128, 113, 113] 	5.44e-05
CONV2_2 	[128, 113, 113] 	[128, 128, 3, 3] 	[128, 113, 113] 	0.000236
RELU 	[128, 113, 113] 	[128, 128, 0, 0] 	[128, 113, 113] 	5.37e-05
MPOOL 	[128, 113, 113] 	[0, 0, 2, 2] 	[128, 57, 57] 	4.3e-05
CONV3_1 	[128, 57, 57] 	[128, 256, 3, 3] 	[256, 57, 57] 	0.000167
RELU 	[256, 57, 57] 	[256, 256, 0, 0] 	[256, 57, 57] 	4.64e-05
CONV3_2 	[256, 57, 57] 	[256, 256, 3, 3] 	[256, 57, 57] 	0.000268
RELU 	[256, 57, 57] 	[256, 256, 0, 0] 	[256, 57, 57] 	4.56e-05
CONV3_3 	[256, 57, 57] 	[256, 256, 3, 3] 	[256, 57, 57] 	0.000268
RELU 	[256, 57, 57] 	[256, 256, 0, 0] 	[256, 57, 57] 	4.6e-05
MPOOL 	[256, 57, 57] 	[0, 0, 2, 2] 	[256, 29, 29] 	4.08e-05
CONV4_1 	[256, 29, 29] 	[256, 512, 3, 3] 	[512, 29, 29] 	0.000297
RELU 	[512, 29, 29] 	[512, 512, 0, 0] 	[512, 29, 29] 	4.59e-05
CONV4_2 	[512, 29, 29] 	[512, 512, 3, 3] 	[512, 29, 29] 	0.000531
RELU 	[512, 29, 29] 	[512, 512, 0, 0] 	[512, 29, 29] 	4.69e-05
CONV4_3 	[512, 29, 29] 	[512, 512, 3, 3] 	[512, 29, 29] 	0.000531
RELU 	[512, 29, 29] 	[512, 512, 0, 0] 	[512, 29, 29] 	4.64e-05
MPOOL 	[512, 29, 29] 	[0, 0, 2, 2] 	[512, 15, 15] 	4.2e-05
CONV5_1 	[512, 15, 15] 	[512, 512, 3, 3] 	[512, 15, 15] 	0.000361
RELU 	[512, 15, 15] 	[512, 512, 0, 0] 	[512, 15, 15] 	4.79e-05
CONV5_2 	[512, 15, 15] 	[512, 512, 3, 3] 	[512, 15, 15] 	0.000357
RELU 	[512, 15, 15] 	[512, 512, 0, 0] 	[512, 15, 15] 	4.73e-05
CONV5_3 	[512, 15, 15] 	[512, 512, 3, 3] 	[512, 15, 15] 	0.000358
RELU 	[512, 15, 15] 	[512, 512, 0, 0] 	[512, 15, 15] 	4.62e-05
MPOOL 	[512, 15, 15] 	[0, 0, 2, 2] 	[512, 8, 8] 	4.13e-05
FC6 	[512, 8, 8] 	[512, 4096, 8, 8] 	[4096, 1, 1] 	0.00109
RELU 	[4096, 1, 1] 	[4096, 4096, 0, 0] 	[4096, 1, 1] 	4.61e-05
DROPOUT 	[4096, 1, 1] 	[4096, 4096, 0, 0] 	[4096, 1, 1] 	8.83e-05
FC7 	[4096, 1, 1] 	[4096, 4096, 1, 1] 	[4096, 1, 1] 	0.000151
RELU 	[4096, 1, 1] 	[4096, 4096, 0, 0] 	[4096, 1, 1] 	4.24e-05
DROPOUT 	[4096, 1, 1] 	[4096, 4096, 0, 0] 	[4096, 1, 1] 	7.89e-05
FC8 	[4096, 1, 1] 	[4096, 1000, 1, 1] 	[1000, 1, 1] 	9.58e-05
Total |x|: 29652556 items
Total |y|: 29500328 items
Total |w|: 169801408 items
Total comp: 0.0076177 items
Max |y|: 3268864 sec
==========SINGLE-NODE===============
maxBatchPerNode: 14.0347948546
mem4Sample: 1831634336.0
==========DATA PARALLELISM==========
maxBatchPerNode: 14.0347948546
mem4Sample: 1831634336.0
==========FILTER PARALLELISM==========
max_rank 64
Not enough memory to store model and 16.0 samples in Filter-Parallelism with 2.0 GPUs
Not enough memory to store model and 32.0 samples in Filter-Parallelism with 4.0 GPUs
Not enough memory to store model and 64.0 samples in Filter-Parallelism with 8.0 GPUs
Not enough memory to store model and 128.0 samples in Filter-Parallelism with 16.0 GPUs
Not enough memory to store model and 256.0 samples in Filter-Parallelism with 32.0 GPUs
Not enough memory to store model and 512.0 samples in Filter-Parallelism with 64.0 GPUs
Get result from Case 2 with miniBatch 8.0 nodeNumber 2.0
Get result from Case 2 with miniBatch 16.0 nodeNumber 4.0
Get result from Case 2 with miniBatch 16.0 nodeNumber 8.0
Get result from Case 2 with miniBatch 16.0 nodeNumber 16.0
Get result from Case 2 with miniBatch 16.0 nodeNumber 32.0
Get result from Case 2 with miniBatch 16.0 nodeNumber 64.0
==========Channel PARALLELISM==========
max_rank 3
Not enough memory to store model and 16.0 samples in Channel-Parallelism with 2.0 GPUs
Get result from Case 2 with miniBatch 8.0 nodeNumber 2.0
==========DATA + FILTER PARALLELISM==========
maxBatchPerNode: 16.1877085824
mem4Sample: 812825888.0
====================================
name		B	p	Mem (bytes)	Tcomp (s)	Tcomm(s)	Time(s)	Cost(min*Node)
single		8.0	1	5144195840.0	9750.656	0	9750.656	163.0
data		16.0	2.0	5144195840.0	4875.328	1088.1690112	5963.4970112	200.0
data		32.0	4.0	5144195840.0	2437.664	817.2067584	3254.8707584	220.0
data		64.0	8.0	5144195840.0	1218.832	1906.0771296	3124.9091296	424.0
data		128.0	16.0	5144195840.0	609.416	1023.417048	1632.833048	448.0
data		256.0	32.0	5144195840.0	304.708	531.1465848	835.8545848	448.0
data		512.0	64.0	5144195840.0	152.354	272.2762476	424.6302476	512.0
data		1024.0	128.0	5144195840.0	76.177	139.7309626	215.9079626	512.0
data		2048.0	256.0	5144195840.0	38.0885	72.7985985	110.8870985	512.0
data		4096.0	512.0	5144195840.0	19.04425	39.047387925	58.091637925	512.0
filter		8.0	2.0	4464990208.0	4875.328	4690.9367808	9566.2647808	320.0
filter		16.0	4.0	7911171968.0	2437.664	7036.4051712	9474.0691712	632.0
filter		16.0	8.0	7741370560.0	1218.832	32672.5793856	33891.4113856	4520.0
filter		16.0	16.0	7656469856.0	609.416	36029.444256	36638.860256	9776.0
filter		16.0	32.0	7614019504.0	304.708	39344.8514112	39649.5594112	21152.0
filter		16.0	64.0	7592794328.0	152.354	44276.5044288	44428.8584288	47424.0
channel		8.0	2.0	4464990208.0	4875.328	4690.9367808	9566.2647808	320.0
dfilter		16.0	4.0	7911171968.0	2437.664	7036.4051712	9474.0691712	632.0
dfilter		32.0	8.0	7911171968.0	1218.832	5692.889568	6911.721568	928.0
dfilter		64.0	16.0	7911171968.0	609.416	3391.0382496	4000.4542496	1072.0
dfilter		128.0	32.0	7911171968.0	304.708	1832.5892112	2137.2972112	1152.0
dfilter		256.0	64.0	7911171968.0	152.354	951.4838472	1103.8378472	1216.0
dfilter		512.0	128.0	7911171968.0	76.177	485.496914	561.673914	1280.0
dfilter		1024.0	256.0	7911171968.0	38.0885	246.2038596	284.2923596	1280.0
dfilter		2048.0	512.0	7911171968.0	19.04425	124.9234392	143.9676892	1536.0
dfilter		4096.0	1024.0	7911171968.0	9.522125	63.88525695	73.40738195	2048.0
